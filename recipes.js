var recipes = [{
    id: 1,
    title: "Chicken Enchilada Casserole",
    calorie: 500,
    restrictions: ["Vegetarian"],
    ingredients: [
        {"chicken": "2lb"},
        {"Enchilada sauce": "14oz jar"},
        {"Monterey Jack cheese": "3 Cups shredded"},
        {"corn tortillas": "6"}
    ],
    image: "https://www.themealdb.com/images/media/meals/qtuwxu1468233098.jpg",
    summary: "American and Mexican fusion that combines ease and taste. This dish doesn't even need a side!",
    instructions: [
        "Cut each chicken breast in about 3 pieces, so that it cooks faster and put it in a small pot.",
        "Pour Enchilada sauce over it and cook covered on low to medium heat until chicken is cooked through, about 20 minutes.",
        "No water is needed, the chicken will cook in the Enchilada sauce.",
        "Make sure you stir occasionally so that it doesn't stick to the bottom.",
        "Remove chicken from the pot and shred with two forks.",
        "Preheat oven to 375 F degrees.",
        "Start layering the casserole.",
        "Start with about ¼ cup of the leftover Enchilada sauce over the bottom of a baking dish.",
        "I used a longer baking dish, so that I can put 2 corn tortillas across.",
        "Place 2 tortillas on the bottom, top with ⅓ of the chicken and ⅓ of the remaining sauce.",
        "Sprinkle with ⅓ of the cheese and repeat starting with 2 more tortillas, then chicken, sauce, cheese.",
        "Repeat with last layer with the remaining ingredients, tortillas, chicken, sauce and cheese.",
        "Bake for 20 to 30 minutes uncovered, until bubbly and cheese has melted and started to brown on top. Serve warm."
    ]
}, {
    id: 2,
    title: "Honey Teriyaki Salmon",
    calorie: 230,
    restrictions: ["Pescatarian", "Healthy"],
    ingredients: [
        {"salmon": "1 lb"},
        {"soy sauce": "2 tbsp"},
        {"Sake": "2 tbsp"},
        {"sesame seeds": "4 tbsp"}
    ],
    image: "https://www.themealdb.com/images/media/meals/xxyupu1468262513.jpg",
    summary: "This asian inspired dinner is fast and simple. Tender fish with a sweet teriyaki sauce can be served over rice or with a side of greens.",
    instructions: [
        "Mix all the ingredients in the Honey Teriyaki Glaze together.",
        "Whisk to blend well.",
        "Combine the salmon and the Glaze together.",
        "Heat up a skillet on medium-low heat.",
        "Add the oil, Pan-fry the salmon on both sides until it’s completely cooked inside and the glaze thickens.",
        "Garnish with sesame and serve immediately."],
}, {
    id: 3,
    title: "Fettuccine Alfredo",
    calorie: 450,
    restrictions: ["Vegetarian"],
    ingredients: [
        {fettuccine: "1 lb"},
        {butter: "1/2 cup"},
        {parmesan: "1 cup grated"},
        {heavyCream: "1 cup"}
    ],
    image: "https://www.themealdb.com/images/media/meals/0jv5gx1661040802.jpg",
    summary: "This classic American Italian dish is sure to be a crowd favourite for parties or family gatherings. Served best with a side of garlic bread or with parsley sprinkled on top.",
    instructions: [
        "Cook the fettuccine according to package instructions.",
        "While the fettuccine is cooking, melt the butter in a saucepan over medium heat.",
        "Add the heavy cream to the saucepan and whisk to combine.",
        "Add the grated parmesan cheese to the saucepan and whisk to combine.",
        "Reduce the heat to low and continue whisking until the sauce has thickened and the cheese has melted.",
        "Drain the cooked fettuccine and add it to the saucepan with the Alfredo sauce.",
        "Toss the fettuccine in the sauce until it is fully coated.",
        "Serve hot with additional grated parmesan cheese and chopped parsley, if desired."
    ],
}, {
    id: 4,
    title: "Three Ingredient Chocolate Cake",
    calorie: 639,
    restrictions: ["Gluten Free"],
    ingredients: [
        {eggs: "3 large"},
        {bittersweetChocolate: "12 oz"},
        {unsaltedButter: "1 cup"}
    ],
    image: "https://www.noshtastic.com/wp-content/uploads/2019/09/gluten-free-chocolate-cake-1-of-1-6.jpg",
    summary: "Three Ingredient Chocolate Cake is a rich, decadent and irresistibly delicious dessert that can be made with just three simple ingredients - eggs, bittersweet chocolate, and unsalted butter. This gluten-free cake is perfect for those who have a sweet tooth but don't want to spend hours in the kitchen. The recipe is easy to follow, and the end result is a cake that is moist, fudgy and bursting with chocolatey goodness. Whether you're entertaining guests or just want a treat for yourself, this cake is sure to satisfy your cravings and leave you wanting more.",
    instructions: [
        "Preheat your oven to 350°F (180°C) and prepare a 9-inch cake pan with parchment paper.",
        "Melt the chocolate and butter together in a heatproof bowl set over a pot of simmering water, stirring until smooth.",
        "Remove the bowl from the pot and whisk in the eggs one at a time.",
        "Pour the batter into the prepared cake pan.",
        "Bake for 20-25 minutes, or until the cake is set and a toothpick inserted in the center comes out clean.",
        "Allow the cake to cool in the pan for 10 minutes before removing it from the pan and allowing it to cool completely on a wire rack.",
        "Dust with powdered sugar or top with whipped cream or fresh berries, if desired."
    ]
},
    {
        id: 5,
        title: "Mediterranean Pasta Salad",
        calorie: 320,
        restrictions: ["Vegetarian"],
        ingredients: [
            {pasta: "1 lb"},
            {cherryTomatoes: "1 pint"},
            {mozzarella: "8 oz"},
            {basil: "1/4 cup chopped"},
            {oliveOil: "1/4 cup"},
            {redWineVinegar: "1/4 cup"},
            {salt: "1 tsp"},
            {pepper: "1/4 tsp"}
        ],
        image: "https://www.themealdb.com/images/media/meals/wvqpwt1468339226.jpg",
        summary: "This refreshing pasta salad is perfect for a summer picnic or barbecue. The tangy dressing pairs perfectly with the colorful veggies and cheese.",
        instructions: [
            "Cook the pasta according to package directions.",
            "While the pasta is cooking, cut the cherry tomatoes in half and chop the basil.",
            "In a small bowl, whisk together the olive oil, red wine vinegar, salt, and pepper to make the dressing.",
            "Once the pasta is cooked, drain it and rinse it under cold water to cool it down.",
            "In a large bowl, combine the pasta, cherry tomatoes, mozzarella, and basil.",
            "Pour the dressing over the pasta and toss to combine.",
            "Serve chilled."
        ]
    },
    {
        id: 6,
        title: "Spicy Tofu Stir-Fry",
        calorie: 300,
        restrictions: ["Vegetarian", "Healthy"],
        ingredients: [
            {tofu: "14 oz"},
            {bellPeppers: "2"},
            {onion: "1"},
            {garlic: "2 cloves"},
            {ginger: "1 inch piece"},
            {soySauce: "3 tbsp"},
            {srirachaSauce: "1 tbsp"},
            {vegetableOil: "2 tbsp"}
        ],
        image: "https://www.themealdb.com/images/media/meals/1529443236.jpg",
        summary: "This flavorful tofu stir-fry is perfect for a quick and healthy weeknight dinner. The combination of spicy and savory flavors will leave you satisfied and feeling good.",
        instructions: [
            "Press the tofu to remove excess water, then cut it into cubes.",
            "Chop the bell peppers and onion into bite-sized pieces.",
            "Mince the garlic and ginger.",
            "In a small bowl, whisk together the soy sauce and sriracha sauce.",
            "Heat the vegetable oil in a large skillet over medium-high heat.",
            "Add the tofu to the skillet and cook until lightly browned on all sides, about 5-7 minutes.",
            "Add the bell peppers and onion to the skillet and cook for another 2-3 minutes, until the vegetables are slightly softened.",
            "Add the garlic and ginger to the skillet and cook for another minute, until fragrant.",
            "Pour the sauce over the tofu and vegetables and stir to combine.",
            "Cook for another 1-2 minutes, until the sauce has thickened and the tofu and vegetables are coated.",
            "Serve hot with rice or noodles."
        ]
    },
    {
        id: 7,
        title: "Beef and Broccoli Stir-Fry",
        calorie: 400,
        restrictions: [],
        ingredients: [
            {flankSteak: "1 lb"},
            {broccoli: "1 head"},
            {garlic: "3 cloves"},
            {ginger: "1 inch piece"},
            {soySauce: "1/4 cup"},
            {brownSugar: "2 tbsp"},
            {cornstarch: "1 tbsp"},
            {vegetableOil: "2 tbsp"}
        ],
        image: "https://www.themealdb.com/images/media/meals/1529443236.jpg",
        summary: "This classic stir-fry is a crowd-pleaser for any occasion. The tender beef and crisp broccoli are tossed in a savory sauce that is sure to satisfy your taste buds.",
        instructions: [
            "Slice the flank steak against the grain into thin strips.",
            "Cut the broccoli into bite-sized pieces.",
            "Mince the garlic and ginger.",
            "In a small bowl, whisk together the soy sauce, brown sugar, cornstarch, and water to make the sauce.",
            "Heat the vegetable oil in a large skillet over high heat.",
            "Add the beef to the skillet and cook until browned on all sides, about 5-7 minutes.",
            "Remove the beef from the skillet and set aside.",
            "Add the broccoli to the skillet and cook for 2-3 minutes, until slightly softened.",
            "Add the garlic and ginger to the skillet and cook for another minute, until fragrant.",
            "Pour the sauce over the broccoli and stir to combine.",
            "Add the beef back to the skillet and stir to combine with the sauce and broccoli.",
            "Cook for another 1-2 minutes, until the sauce has thickened and the beef and broccoli are coated.",
            "Serve hot with rice or noodles."
        ]
    }
];


function searchRecipes(searchValue, recipes) {
    var matchedRecipes = [];

    for (var i = 0; i < recipes.length; i++) {
        var recipe = recipes[i];

        if (recipe.title.toLowerCase().indexOf(searchValue) !== -1) {
            // title search
            matchedRecipes.push(recipe);
        } else {
            // restrictions search
            var found = false;
            for (var j = 0; j < recipe.restrictions.length; j++) {
                if (recipe.restrictions[j].toLowerCase().indexOf(searchValue) !== -1) {
                    found = true;
                    break;
                }
            }
            if (found) {
                matchedRecipes.push(recipe);
            } else {
                // ingredients search
                for (var k = 0; k < recipe.ingredients.length; k++) {
                    var ingredient = recipe.ingredients[k];
                    if (Object.keys(ingredient)[0].toLowerCase().indexOf(searchValue) !== -1) {
                        matchedRecipes.push(recipe);
                        break;
                    }
                }
            }
        }
    }

    return matchedRecipes;
}

function displayRecipes(matchedRecipes) {
    var recipeContainer = getElement("recipeContainer");
    recipeContainer.innerHTML = "";

    for (var i = 0; i < matchedRecipes.length; i++) {
        var recipe = matchedRecipes[i];

        var recipeCard = createElement("div");
        addStyleClass(recipeCard, "recipe-card");

        var recipeTitle = createElement("h3");
        recipeTitle.textContent = recipe.title;
        append(recipeCard, recipeTitle);

        var recipeDetails = createElement("div");
        addStyleClass(recipeDetails, "recipe-details");
        append(recipeCard, recipeDetails);

        var recipeSummaryContainer = createElement("div");
        addStyleClass(recipeSummaryContainer, "recipe-summary-container");
        append(recipeDetails, recipeSummaryContainer);

        var recipeImage = createElement("img");
        recipeImage.src = recipe.image;
        recipeImage.alt = recipe.title;
        addStyleClass(recipeImage, "recipe-image");
        append(recipeSummaryContainer, recipeImage);

        var recipeSummaryRestrictionsContainer = createElement("div");
        addStyleClass(recipeSummaryRestrictionsContainer, "recipe-summary-restrictions-container");
        append(recipeSummaryContainer, recipeSummaryRestrictionsContainer);

        var recipeSummary = createElement("p");
        recipeSummary.textContent = recipe.summary;
        addStyleClass(recipeSummary, "recipe-summary");
        append(recipeSummaryRestrictionsContainer, recipeSummary);

        var recipeRestrictions = createElement("p");
        recipeRestrictions.textContent = "Restrictions: " + recipe.restrictions.join(", ");
        addStyleClass(recipeRestrictions, "recipe-restrictions");
        append(recipeSummaryRestrictionsContainer, recipeRestrictions);

        var hr = createElement("hr");
        addStyleClass(hr, "divider");
        append(recipeCard, hr);

        var ingredientsTitle = createElement("h4");
        ingredientsTitle.textContent = "Ingredients";
        append(recipeCard, ingredientsTitle);

        var ingredientsTable = createElement("table");
        addStyleClass(ingredientsTable, "ingredients-table");
        append(recipeCard, ingredientsTable);

        for (var j = 0; j < recipe.ingredients.length; j++) {
            var ingredient = recipe.ingredients[j];
            var ingredientName = Object.keys(ingredient)[0];
            var ingredientQuantity = ingredient[ingredientName];


            var ingredientRow = createElement("tr");

            var nameColumn = createElement("td");
            nameColumn.textContent = ingredientName;
            append(ingredientRow, nameColumn);

            var quantityColumn = createElement("td");
            quantityColumn.textContent = ingredientQuantity;
            append(ingredientRow, quantityColumn);

            append(ingredientsTable, ingredientRow);
        }

        var hr = createElement("hr");
        addStyleClass(hr, "divider");
        append(recipeCard, hr);

        var instructionsTitle = createElement("h4");
        instructionsTitle.textContent = "Instructions";
        append(recipeCard, instructionsTitle);

        var instructionsList = createElement("ol");
        addStyleClass(instructionsList, "instructions-list");
        append(recipeCard, instructionsList);

        for (var k = 0; k < recipe.instructions.length; k++) {
            var instruction = createElement("li");
            instruction.textContent = recipe.instructions[k];
            append(instructionsList, instruction);
        }

        append(recipeContainer, recipeCard);
    }
}
